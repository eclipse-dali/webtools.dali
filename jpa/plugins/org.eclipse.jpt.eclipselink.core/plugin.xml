<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<!--
  Copyright (c) 2008, 2010 Oracle. All rights reserved.
  This program and the accompanying materials are made available under the
  terms of the Eclipse Public License v1.0, which accompanies this distribution
  and is available at http://www.eclipse.org/legal/epl-v10.html.

  Contributors:
    Oracle - initial API and implementation
 -->

<plugin>
	
	<extension
		point="org.eclipse.core.contenttype.contentTypes">
		
		<content-type
			id="org.eclipse.jpt.eclipselink.core.content.orm"
			name="%ECLIPSELINK_ORM_XML_CONTENT"
			base-type="org.eclipse.jpt.core.content.mappingFile">
			<describer
				class="org.eclipse.core.runtime.content.XMLRootElementContentDescriber2">
				<parameter 
					name="element" 
					value="{http://www.eclipse.org/eclipselink/xsds/persistence/orm}entity-mappings"/>
			</describer>
		</content-type>
		
	</extension>
	
	
	<extension
		point="org.eclipse.jpt.core.jpaPlatforms">
		
		<jpaPlatform
			id="org.eclipse.eclipselink.platform"
            factoryClass="org.eclipse.jpt.eclipselink.core.internal.EclipseLinkJpaPlatformFactory"
			label="%ECLIPSELINK1_0_x_PLATFORM"
			jpaFacetVersion="1.0">
		</jpaPlatform>
	    
	    <jpaPlatform
	        id="eclipselink1_1"
	        factoryClass="org.eclipse.jpt.eclipselink.core.internal.v1_1.EclipseLink1_1JpaPlatformFactory"
	        label="%ECLIPSELINK1_1_x_PLATFORM"
	        jpaFacetVersion="1.0">
	    </jpaPlatform>
	    
	    <jpaPlatform
			id="eclipselink1_2"
			factoryClass="org.eclipse.jpt.eclipselink.core.internal.v1_2.EclipseLink1_2JpaPlatformFactory"
			label="%ECLIPSELINK1_2_x_PLATFORM"
			jpaFacetVersion="1.0">
		</jpaPlatform>
		
	    <jpaPlatform
	        id="eclipselink2_0"
	        factoryClass="org.eclipse.jpt.eclipselink.core.internal.v2_0.EclipseLink2_0JpaPlatformFactory"
	        label="%ECLIPSELINK2_0_x_PLATFORM"
	        jpaFacetVersion="2.0">
	    </jpaPlatform>
		
		<jpaPlatform
	        id="eclipselink2_1"
	        factoryClass="org.eclipse.jpt.eclipselink.core.internal.v2_1.EclipseLink2_1JpaPlatformFactory"
	        label="%ECLIPSELINK2_1_x_PLATFORM"
	        jpaFacetVersion="2.0">
	    </jpaPlatform>
		
	</extension>


	
	<!--
	******************************************
	* Library Provider Framework Integration *
	******************************************
	-->
	
	<extension point="org.eclipse.jst.common.project.facet.core.downloadableLibraries">
		
		<import-definitions 
			url="http://www.eclipse.org/webtools/dali/dev/eclipselink/eclipselink-downloadable-libs.xml">
			<enablement>
				<with variable="requestingProjectFacet">
					<test 
						property="org.eclipse.wst.common.project.facet.core.projectFacet" 
						value="jpt.jpa" 
						forcePluginActivation="true"/>
				</with>
			</enablement>
		</import-definitions>
		
	</extension>
	
	
	<extension 
		point="org.eclipse.jst.common.project.facet.core.libraryProviders">
		
		<provider id="jpa-eclipselink1_0-user-library-provider" extends="wtp-user-library-provider">
			<param name="validator" value="org.eclipse.jpt.eclipselink.core.internal.utility.EclipseLinkLibraryValidator"/>
			<param name="validator.param.0" value="version-range:[1.0, 1.2)"/>
			<param name="validator.param.1" value="key-class:javax.persistence.Entity"/>
			<enablement>
				<and>
					<with variable="requestingProjectFacet">
						<test property="org.eclipse.wst.common.project.facet.core.projectFacet" value="jpt.jpa" forcePluginActivation="true"/>
					</with>
					<with variable="jpaPlatform">
						<equals value="org.eclipse.eclipselink.platform"/>
					</with>
				</and>
			</enablement>
		</provider>
		
		<provider id="jpa-eclipselink1_1-user-library-provider" extends="wtp-user-library-provider">
			<param name="validator" value="org.eclipse.jpt.eclipselink.core.internal.utility.EclipseLinkLibraryValidator"/>
			<param name="validator.param.0" value="version-range:[1.1, 1.2)"/>
			<param name="validator.param.1" value="key-class:javax.persistence.Entity"/>
			<enablement>
				<and>
					<with variable="requestingProjectFacet">
						<test property="org.eclipse.wst.common.project.facet.core.projectFacet" value="jpt.jpa" forcePluginActivation="true"/>
					</with>
					<with variable="jpaPlatform">
						<equals value="eclipselink1_1"/>
					</with>
				</and>
			</enablement>
		</provider>
		
		<provider id="jpa-eclipselink1_2-user-library-provider" extends="wtp-user-library-provider">
			<param name="validator" value="org.eclipse.jpt.eclipselink.core.internal.utility.EclipseLinkLibraryValidator"/>
			<param name="validator.param.0" value="version-range:[1.2, 1.3)"/>
			<param name="validator.param.1" value="key-class:javax.persistence.Entity"/>
			<enablement>
				<and>
					<with variable="requestingProjectFacet">
						<test property="org.eclipse.wst.common.project.facet.core.projectFacet" value="jpt.jpa" forcePluginActivation="true"/>
					</with>
					<with variable="jpaPlatform">
						<equals value="eclipselink1_2"/>
					</with>
				</and>
			</enablement>
		</provider>
		
		<provider id="eclipselink2_0-user-library-provider" extends="wtp-user-library-provider">
			<param name="validator" value="org.eclipse.jpt.eclipselink.core.internal.utility.EclipseLinkLibraryValidator"/>
			<param name="validator.param.0" value="version-range:[2.0, 3.0)"/>
			<param name="validator.param.1" value="key-class:javax.persistence.Entity"/>
			<param name="validator.param.2" value="key-class:javax.persistence.ElementCollection"/>
			<enablement>
				<and>
					<with variable="requestingProjectFacet">
						<test property="org.eclipse.wst.common.project.facet.core.projectFacet" value="jpt.jpa" forcePluginActivation="true"/>
					</with>
					<with variable="jpaPlatform">
						<equals value="eclipselink2_0"/>
					</with>
				</and>
			</enablement>
		</provider>
		
		<provider id="jpa-eclipselink2_1-user-library-provider" extends="wtp-user-library-provider">
			<param name="validator" value="org.eclipse.jpt.eclipselink.core.internal.utility.EclipseLinkLibraryValidator"/>
			<param name="validator.param.0" value="version-range:[2.1, 3.0)"/>
			<param name="validator.param.1" value="key-class:javax.persistence.Entity"/>
			<param name="validator.param.2" value="key-class:javax.persistence.ElementCollection"/>
			<enablement>
				<and>
					<with variable="requestingProjectFacet">
						<test property="org.eclipse.wst.common.project.facet.core.projectFacet" value="jpt.jpa" forcePluginActivation="true"/>
					</with>
					<with variable="jpaPlatform">
						<equals value="eclipselink2_1"/>
					</with>
				</and>
			</enablement>
		</provider>
		
	</extension>
	
	
	<!-- ***** WTP extensions ***** -->

	<extension
		point="org.eclipse.wst.common.modulecore.resourceFactories">
		
		<resourceFactory
			class="org.eclipse.jpt.eclipselink.core.resource.orm.EclipseLinkOrmXmlResourceFactory"
			isDefault="true">
			<contentTypeBinding
				contentTypeId="org.eclipse.jpt.eclipselink.core.content.orm">
			</contentTypeBinding>
		</resourceFactory>
	    
	</extension>
	
	
	<extension 
		point="org.eclipse.wst.xml.core.catalogContributions">
		
		<catalogContribution id="default">
			
			<public
				publicId="http://www.eclipse.org/eclipselink/xsds/persistence/orm"
				uri="schemas/eclipselink_orm_2_1.xsd"/>
			
			<uri
				name="http://www.eclipse.org/eclipselink/xsds/eclipselink_orm_1_0.xsd"
				uri="schemas/eclipselink_orm_1_0.xsd" />
			
			<uri
				name="http://www.eclipse.org/eclipselink/xsds/eclipselink_orm_1_1.xsd"
				uri="schemas/eclipselink_orm_1_1.xsd" />
			
			<uri
				name="http://www.eclipse.org/eclipselink/xsds/eclipselink_orm_1_2.xsd"
				uri="schemas/eclipselink_orm_1_2.xsd" />
			
			<uri
				name="http://www.eclipse.org/eclipselink/xsds/eclipselink_orm_2_0.xsd"
				uri="schemas/eclipselink_orm_2_0.xsd" />
			
			<uri
				name="http://www.eclipse.org/eclipselink/xsds/eclipselink_orm_2_1.xsd"
				uri="schemas/eclipselink_orm_2_1.xsd" />
			
			<public
				publicId="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
				uri="schemas/eclipselink_oxm_2_1.xsd"/>

			<uri
				name="http://www.eclipse.org/eclipselink/xsds/eclipselink_oxm_2_0.xsd"
				uri="schemas/eclipselink_oxm_2_0.xsd" />
			
			<uri
				name="http://www.eclipse.org/eclipselink/xsds/eclipselink_oxm_2_1.xsd"
				uri="schemas/eclipselink_oxm_2_1.xsd" />
				
			<public
				publicId="http://www.eclipse.org/eclipselink/xsds/persistence"
				uri="schemas/eclipselink_oxm_2_1.xsd"/>				
			
			<uri
				name="http://www.eclipse.org/eclipselink/xsds/eclipselink_persistence_map_1.0.xsd"
				uri="schemas/eclipselink_persistence_map_1.0.xsd" />
			
			<uri
				name="http://www.eclipse.org/eclipselink/xsds/eclipselink_persistence_map_1.1.xsd"
				uri="schemas/eclipselink_persistence_map_1.1.xsd" />
			
			<uri
				name="http://www.eclipse.org/eclipselink/xsds/eclipselink_persistence_map_1.2.xsd"
				uri="schemas/eclipselink_persistence_map_1.2.xsd" />
			
			<uri
				name="http://www.eclipse.org/eclipselink/xsds/eclipselink_persistence_map_2.0.xsd"
				uri="schemas/eclipselink_persistence_map_2.0.xsd" />
				
				
			<uri
				name="http://www.eclipse.org/eclipselink/xsds/eclipselink_sessions_1.0.xsd"
				uri="schemas/eclipselink_sessions_1.0.xsd" />
				
			<uri
				name="http://www.eclipse.org/eclipselink/xsds/eclipselink_sessions_1.1.xsd"
				uri="schemas/eclipselink_sessions_1.1.xsd" />	
						
			<uri
				name="http://www.eclipse.org/eclipselink/xsds/eclipselink_sessions_1.2.xsd"
				uri="schemas/eclipselink_sessions_1.2.xsd" />
				
			<uri
				name="http://www.eclipse.org/eclipselink/xsds/eclipselink_sessions_2.0.xsd"
				uri="schemas/eclipselink_sessions_2.0.xsd" />	
			
		</catalogContribution>
		
    </extension>
	
</plugin>
