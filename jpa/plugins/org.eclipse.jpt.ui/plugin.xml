<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>
	
	<extension-point 
		id="jpaPlatform" 
		name="%JPA_PLATFORM" 
		schema="schema/jpaPlatform.exsd"/>
	
	
	<extension
		point="org.eclipse.core.runtime.adapters">
		
		<factory
			adaptableType="org.eclipse.ui.IWorkbenchPart"
			class="org.eclipse.jpt.ui.internal.selection.SelectionParticipantFactory">
			<adapter type="org.eclipse.jpt.ui.internal.selection.ISelectionParticipant"/>
		</factory>
		
		<factory
			adaptableType="org.eclipse.jpt.core.internal.IPersistentAttribute"
			class="org.eclipse.jpt.ui.internal.actions.PersistentAttributeActionFilter$Factory">
			<adapter
				type="org.eclipse.ui.IActionFilter"/>
		</factory>
		
		<factory
			adaptableType="org.eclipse.jpt.core.internal.content.orm.XmlPersistentAttribute"
			class="org.eclipse.jpt.ui.internal.actions.XmlPersistentAttributeActionFilter$Factory">
			<adapter
				type="org.eclipse.ui.IActionFilter"/>
		</factory>
		
	</extension>
	
	
	<extension
		point="org.eclipse.jpt.ui.jpaPlatform">
		
		<jpaPlatform
			id="generic"
			class="org.eclipse.jpt.ui.internal.generic.GenericPlatformUi"/>
		
	</extension>
	
	
	<extension
		point="org.eclipse.ui.navigator.viewer">
		
		<viewerContentBinding
			viewerId="org.eclipse.ui.navigator.ProjectExplorer">
			<includes>
				<contentExtension pattern="org.eclipse.jpt.ui.*"/>
			</includes>
		</viewerContentBinding>
		
	</extension>
	
	
	<extension
		point="org.eclipse.ui.navigator.navigatorContent">
		
		<navigatorContent
			id="org.eclipse.jpt.ui.jpaNavigatorContent"
			name="%jpaNavigatorContent" 
			priority="higher"
			icon="icons/full/obj16/jpa_content.gif"
			activeByDefault="true"
			contentProvider="org.eclipse.jpt.ui.internal.navigator.JpaContentProvider"
			labelProvider="org.eclipse.jpt.ui.internal.navigator.JpaLabelProvider">
			
			<triggerPoints>
				<and>
					<adapt type="org.eclipse.core.resources.IProject"> 
						<test forcePluginActivation="true"
							property="org.eclipse.wst.common.project.facet.core.projectFacet"
							value="jpt.jpa" />
					</adapt>
				</and>
			</triggerPoints>
			
			<!--
			
			<possibleChildren>
				<or>
					<and>
						<instanceof value="org.eclipse.emf.ecore.EObject" />
						<or>
							<test forcePluginActivation="true"
								property="org.eclipse.wst.common.emfworkbench.integration.emfPackage"
								value="ejb.xmi" />
						</or>
					</and>
					<instanceof value="org.eclipse.jst.j2ee.internal.ejb.provider.J2EEJavaClassProviderHelper"/>
					<instanceof value="org.eclipse.jst.j2ee.internal.ejb.provider.GroupedEJBItemProvider"/>
				</or>
				<instanceof value="org.eclipse.jst.j2ee.navigator.internal.LoadingDDNode"/>
			</possibleChildren>
			
			<commonSorter
				id="org.eclipse.jst.j2ee.navigator.internal.J2EEViewerSorter"
				class="org.eclipse.jst.j2ee.navigator.internal.J2EEViewerSorter" />
			
			-->
			
		</navigatorContent>
		
	</extension>
	
	
	<extension
		point="org.eclipse.ui.newWizards">
		
		<category
			id="org.eclipse.jpt"
			name="%jpaWizardCategoryName"/>
		
		<wizard
			id="org.eclipse.jpt.jpaProject"
			name="%newJpaProjectWizardName"
			icon="icons/full/etool16/new_jpaproject_wiz.gif"
			category="org.eclipse.jpt"
			class="org.eclipse.jpt.ui.internal.wizards.NewJpaProjectWizard"
			project="true"
			finalPerspective="org.eclipse.jpt.ui.jpaPerspective">
			<description>%newJpaProjectWizardDesc</description>
		</wizard>
		
	</extension>
	
	<extension
		point="org.eclipse.ui.popupMenus">
		
		<objectContribution
			id="org.eclipse.jpt.ui.project.JPATools"
			objectClass="org.eclipse.core.resources.IProject"
			adaptable="true">
			<menu
				id="org.eclipse.jpt.ui.project.JPATools"
				label="%jpaMenuName"/>

			<enablement>
					<test property="org.eclipse.wst.common.project.facet.core.projectFacet" value="jpt.jpa"/>
			</enablement>

			<action
				class="org.eclipse.jpt.ui.internal.actions.GenerateEntitiesAction"
				id="org.eclipse.jpt.ui.generateEntities"
				label="%generateEntities"
				menubarPath="org.eclipse.jpt.ui.project.JPATools/content"/>
				
		</objectContribution>
		
		<objectContribution
			id="org.eclipse.jpt.ui.project.JPATools"
			objectClass="org.eclipse.core.resources.IProject"
			adaptable="true">
			<menu
				id="org.eclipse.jpt.ui.project.JPATools"
				label="%jpaMenuName"/>

			<enablement>
					<test property="org.eclipse.wst.common.project.facet.core.projectFacet" value="jpt.jpa"/>
			</enablement>

			<action
				class="org.eclipse.jpt.ui.internal.actions.GenerateDDLAction"
				id="org.eclipse.jpt.ui.generateDDL"
				label="%generateDDL"
				menubarPath="org.eclipse.jpt.ui.project.JPATools/content"/>
				
		</objectContribution>
		
		<objectContribution
			id="org.eclipse.jpt.ui.persistenceXmlActions"
			objectClass="org.eclipse.core.resources.IFile"
			nameFilter="persistence.xml">
			<menu
				id="persistenceXmlJPATools"
				label="%jpaMenuName"/>
			<action
				id="synchClassesAction"
				label="%synchronizeClasses"
				menubarPath="persistenceXmlJPATools/content"
				class="org.eclipse.jpt.ui.internal.actions.SynchronizeClassesAction"
				enablesFor="1"/>
		</objectContribution>
		
		<objectContribution
			id="org.eclipse.jpt.ui.entityMappingsActions"
			objectClass="org.eclipse.jpt.core.internal.content.orm.EntityMappings">
			<action
				id="org.eclipse.jpt.ui.addPersistentClass"
				class="org.eclipse.jpt.ui.internal.actions.AddPersistentClassAction"
				label="%addPersistentClass"
				menubarPath="additions"/>
		</objectContribution>
		
		<objectContribution
			id="org.eclipse.jpt.ui.xmlPersistentTypeActions"
			objectClass="org.eclipse.jpt.core.internal.content.orm.XmlPersistentType">
			<action
				id="org.eclipse.jpt.ui.removePersistentClass"
				class="org.eclipse.jpt.ui.internal.actions.RemovePersistentClassAction"
				label="%removePersistentClass"
				menubarPath="additions"/>
		</objectContribution>
				<objectContribution
			id="org.eclipse.jpt.ui.xmlPersistentAttributeActions1"
			objectClass="org.eclipse.jpt.core.internal.content.orm.XmlPersistentAttribute">
			
			<action
				id="org.eclipse.jpt.ui.addPersistentAttributeToXml"
				class="org.eclipse.jpt.ui.internal.actions.AddPersistentAttributeToXmlAction"
				label="%addPersistentAttributeToXml"
				menubarPath="additions"/>
			<visibility>
				<and>
					<objectState
						name="isVirtual"
						value="true"/>
					<objectState
						name="isMapped"
						value="true"/>
				</and>
			</visibility>
			
		</objectContribution>
		
		<objectContribution
			id="org.eclipse.jpt.ui.xmlPersistentAttributeActions2"
			objectClass="org.eclipse.jpt.core.internal.content.orm.XmlPersistentAttribute">
			
			<action
				id="org.eclipse.jpt.ui.addPersistentAttributeToXmlAndMap"
				class="org.eclipse.jpt.ui.internal.actions.AddPersistentAttributeToXmlAndMapAction"
				label="%addPersistentAttributeToXmlAndMap"
				enablesFor="1"
				menubarPath="additions"/>
			<visibility>
				<and>
					<objectState
						name="isVirtual"
						value="true"/>
					<objectState
						name="isMapped"
						value="false"/>
				</and>
			</visibility>
			
		</objectContribution>
		
		<objectContribution
			id="org.eclipse.jpt.ui.xmlPersistentAttributeActions3"
			objectClass="org.eclipse.jpt.core.internal.content.orm.XmlPersistentAttribute">
			
			<action
				id="org.eclipse.jpt.ui.removePersistentAttributeFromXml"
				class="org.eclipse.jpt.ui.internal.actions.RemovePersistentAttributeFromXmlAction"
				label="%removePersistentAttributeFromXml"
				menubarPath="additions"/>
			<visibility>
				<objectState
					name="isVirtual"
					value="false"/>
			</visibility>
			
		</objectContribution>
		
		
	
	</extension>
	
	<extension
		point="org.eclipse.ui.preferencePages">
		
		<page
			id="org.eclipse.jpt.ui.jpaPreferencePage"
			name="%jpaPreferencePage"
			class="org.eclipse.jpt.ui.internal.prefs.JpaPreferencePage"/>
		
	</extension>
	
	<extension
		point="org.eclipse.ui.propertyPages">
		
		<page
			id="org.eclipse.jpt.ui.jpaProjectPropertiesPage"
			name="%jpaProjectPropertiesPage"
			class="org.eclipse.jpt.ui.internal.properties.JpaProjectPropertiesPage">
			<enabledWhen>
				<adapt 
					type="org.eclipse.core.resources.IProject">
					<test 
						property="org.eclipse.wst.common.project.facet.core.projectFacet"
						value="jpt.jpa"/>
				</adapt>
			</enabledWhen>
		</page>
	</extension>
		
	<extension
		point="org.eclipse.ui.views">
		
		<category
			id="org.eclipse.jpt.ui"
			name="%jpaPerspective"/>
		
		<view
	        category="org.eclipse.jpt.ui"
	        class="org.eclipse.jpt.ui.internal.views.JpaStructureView"
	        icon="icons/full/eview16/jpa_structure.gif"
	        id="org.eclipse.jpt.ui.jpaStructureView"
	        name="%jpaStructure"/>
		
		<view
	        category="org.eclipse.jpt.ui"
	        class="org.eclipse.jpt.ui.internal.views.JpaDetailsView"
	        icon="icons/full/eview16/jpa_details.gif"
			id="org.eclipse.jpt.ui.jpaDetailsView"
			name="%jpaDetails"/>
		
	</extension>
	
<!-- =================================================================================== -->
<!-- Extension: Persistence Perspective                                                  -->
<!-- =================================================================================== -->
	
	<extension
		 point="org.eclipse.ui.perspectives">
		<perspective
        class="org.eclipse.jpt.ui.internal.perspective.JpaPerspectiveFactory"
        icon="icons/full/eview16/jpa_perspective.gif"
        id="org.eclipse.jpt.ui.jpaPerspective"
        name="%jpaPerspective"/>
	</extension>
	
	<extension
		point="org.eclipse.wst.common.project.facet.ui.images">
		
		<image facet="jpt.jpa" path="icons/full/etool16/jpa_facet.gif"/>
		
	</extension>
	
	
	<extension 
		point="org.eclipse.wst.common.project.facet.ui.wizardPages">
		
		<wizard-pages action="jpt.jpa.install">
			<page class="org.eclipse.jpt.ui.internal.wizards.JpaFacetWizardPage"/>
		</wizard-pages>
		
	</extension>
	
<!-- =================================================================================== -->
<!-- Extension: Java Completion Proposal Computer                                        -->
<!-- =================================================================================== -->
	
	<extension
		point="org.eclipse.jdt.ui.javaCompletionProposalComputer"
		id="JpaCompletionProposalComputer">
		<javaCompletionProposalComputer 
			class="org.eclipse.jpt.ui.internal.JpaCompletionProposalComputer"
			categoryId="org.eclipse.jpt.ui.jpaProposalCategory">
			<partition type="__dftl_partition_content_type"/>
			<partition type="__java_string"/>
		</javaCompletionProposalComputer>
	</extension>

	<extension
		point="org.eclipse.jdt.ui.javaCompletionProposalComputer"
		id="jpaProposalCategory"
		name="%JpaProposalCategory">
		<proposalCategory
			icon="$nl$/icons/full/eview16/jpa_perspective.gif"/>
	</extension>

</plugin>
